#---------------------------------------------------#
allow-lan: true  
bind-address: "*"   
ipv6: true
mode: rule        
log-level: warning   
external-controller: 127.0.0.1:9090 
enable-process: true  
find-process-mode: strict 
geox-url:
  geoip: https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat
  geosite: https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat
  mmdb: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-only-cn-private.mmdb

dns: 
  enable: true
  prefer-h3: true
  ipv6: true
  listen: 0.0.0.0:53
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback: # concurrent request with nameserver, fallback used when GEOIP country isn't CN
    - https://1.1.1.1/dns-query
    - tls://dns.google
    - tls://dot.tiar.app

p: &p {type: http, interval: 86400, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 43200}}
pm: &pm {type: file, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 1800}}
pr: &pr {type: select, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡­ğŸ‡° é¦™æ¸¯-CF, ğŸ‡ºğŸ‡² ç¾å›½, ğŸ‡ºğŸ‡² ç¾å›½-CF, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-CF, ğŸ‡¹ğŸ‡¼ å°æ¹¾, ğŸ‡¹ğŸ‡¼ å°æ¹¾-CF,ğŸ‡°ğŸ‡· éŸ©å›½, ğŸ‡°ğŸ‡· éŸ©å›½-CF, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡®ğŸ‡³ å°åº¦, ğŸ›°ï¸ å…¨çƒä»£ç†]}
auto: &auto {type: url-test, lazy: false, url: https://www.gstatic.com/generate_204, tolerance: 30, interval: 300, use: [waynesg,iplc]}
auto-cf: &auto-cf {type: url-test, lazy: false, url: https://www.gstatic.com/generate_204, tolerance: 30, interval: 300, use: [iplc]}
balance: &balance {type: load-balance, lazy: false, url: https://www.gstatic.com/generate_204, tolerance: 30, interval: 300, strategy: consistent-hashing, use: [iplc]}
fallback: &fallback {type: fallback, url: https://www.gstatic.com/generate_204, interval: 900, use: [iplc]}
use: &use {type: select, use: [waynesg,iplc]}
c: &c {type: http, behavior: classical, interval: 43200}
d: &d {type: http, behavior: domain, interval: 43200}
i: &i {type: http, behavior: ipcidr, interval: 43200}

proxy-providers:
 waynesg:
   <<: *p
   url: "http://10.10.10.2:25500/sub?target=clash&url="
 iplc:
   <<: *p
   url: "http://10.10.10.2:25500/sub?target=clash&url="
   path: ./proxy_provider/iplc.yaml
    
proxy-groups:
- {name: ğŸ“º YouTube, <<: *pr}

- {name: ğŸ§° Github, <<: *pr}

- {name: ğŸ“± ç¤¾äº¤åª’ä½“, <<: *pr}

- {name: ğŸ“Ÿ äººå·¥æ™ºèƒ½, <<: *pr}

- {name: ğŸ¥ NetFlix, <<: *pr}

- {name: ğŸ“½ï¸ Disney+, <<: *pr}

- {name: ğŸ‡¬ Google, <<: *pr}

- {name: â“‚ï¸ Microsoft, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ›°ï¸ å…¨çƒä»£ç†]}

- {name: ï£¿ Apple ä¸­å›½, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ›°ï¸ å…¨çƒä»£ç†]}

- {name: ï£¿ Apple å›½é™…, <<: *pr}

- {name: ğŸ“ˆ ç½‘ç»œæµ‹è¯•, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ›°ï¸ å…¨çƒä»£ç†]}

- {name: ğŸ® æ¸¸æˆæœåŠ¡, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ›°ï¸ å…¨çƒä»£ç†]}

- {name: ğŸµ Tiktok, <<: *pr}

- {name: âœ‰ï¸ Telegram, <<: *pr}

- {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾, <<: *auto, filter: "(?i)TW|ğŸ‡¹ğŸ‡¼"}

- {name: ğŸ‡¹ğŸ‡¼ å°æ¹¾-CF, <<: *auto-cf, filter: "(?i)TW|ğŸ‡¹ğŸ‡¼"}

- {name: ğŸ‡ºğŸ‡² ç¾å›½, <<: *use, filter: "(?i)US|RackNerd|ğŸ‡ºğŸ‡²"}

- {name: ğŸ‡ºğŸ‡² ç¾å›½-CF, <<: *auto-cf, filter: "(?i)US|ğŸ‡ºğŸ‡²"}

- {name: ğŸ‡­ğŸ‡° é¦™æ¸¯, <<: *auto, filter: "(?i)HK|ğŸ‡­ğŸ‡°"}

- {name: ğŸ‡­ğŸ‡° é¦™æ¸¯-CF, <<: *auto-cf, filter: "(?i)HK|ğŸ‡­ğŸ‡°"}

- {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, <<: *auto, filter: "(?i)SG|ğŸ‡¸ğŸ‡¬"}

- {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-CF, <<: *auto-cf, filter: "(?i)SG|ğŸ‡¸ğŸ‡¬"}

- {name: ğŸ‡°ğŸ‡· éŸ©å›½, <<: *auto, filter: "(?i)Seoul|Kr|Chuncheon"}

- {name: ğŸ‡°ğŸ‡· éŸ©å›½-CF, <<: *auto-cf, filter: "(?i)Kr|ğŸ‡°ğŸ‡·"}

- {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬, <<: *auto, filter: "(?i)JP|ğŸ‡¯ğŸ‡µ"}

- {name: ğŸ‡®ğŸ‡³ å°åº¦, <<: *auto, filter: "(?i)Hyderabad"}

- {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, <<: *auto}

- {name: ğŸ›°ï¸ å…¨çƒä»£ç†, <<: *use}

- {name: ğŸš« å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT]}

- {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT, ğŸ›°ï¸ å…¨çƒä»£ç†]}
 
rule-providers:
 ai: {<<: *d, pinterval: 86400, ath: ./rule_provider/ai.yaml, url: https://raw.githubusercontent.com/waynesg/scripts/main/rules/ai.yaml}
 direct: {<<: *c, interval: 86400, path: ./rule_provider/direct.yaml, url: https://raw.githubusercontent.com/waynesg/scripts/main/rules/direct.yaml}
 networktest: {<<: *c, interval: 86400, path: ./rule_provider/networktest.yaml, url: https://raw.githubusercontent.com/waynesg/scripts/main/rules/networktest.yaml}
 syncnext-direct: {<<: *c, interval: 86400, path: ./rule_provider/unbreak-classical.yaml, url: https://raw.githubusercontent.com/waynesg/scripts/main/rules/unbreak-classical.yaml}
 syncnext-proxy: {<<: *c, interval: 86400, path: ./rule_provider/proxy-classical.yaml, url: https://raw.githubusercontent.com/waynesg/scripts/main/rules/proxy-classical.yaml}

rules:
  - AND,((NETWORK,UDP),(OR,(DST-PORT,6881-6890)),(SRC-IP-CIDR,192.168.1.0/24)),ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-ads-all,ğŸš« å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,private,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,category-public-tracker,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,direct,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,networktest,ğŸ“ˆ ç½‘ç»œæµ‹è¯•
  - RULE-SET,ai,ğŸ“Ÿ äººå·¥æ™ºèƒ½
  - RULE-SET,syncnext-direct,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,syncnext-proxy,ğŸ‡°ğŸ‡· éŸ©å›½
  - GEOSITE,microsoft@cn,â“‚ï¸ Microsoft
  - GEOSITE,category-games@cn,ğŸ® æ¸¸æˆæœåŠ¡
  - GEOSITE,apple-cn,ï£¿ Apple ä¸­å›½
  - GEOSITE,apple,ï£¿ Apple å›½é™… 
  - GEOSITE,tiktok,ğŸµ Tiktok
  - GEOSITE,netflix,ğŸ¥ NetFlix
  - GEOSITE,disney,ğŸ“½ï¸ Disney+
  - GEOSITE,youtube,ğŸ“º YouTube
  - GEOSITE,github,ğŸ§° Github
  - GEOSITE,google,ğŸ‡¬ Google
  - GEOSITE,mudvod,ğŸ‡°ğŸ‡· éŸ©å›½
  - GEOSITE,category-social-media-!cn,ğŸ“± ç¤¾äº¤åª’ä½“
  - GEOSITE,geolocation-!cn,ğŸ›°ï¸ å…¨çƒä»£ç†
  - GEOSITE,cn,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,1.0.0.1/32,DIRECT,no-resolve
  - IP-CIDR6,2606:4700:4700::1111/128,DIRECT,no-resolve
  - GEOIP,private,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - GEOIP,cn,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - GEOIP,telegram,âœ‰ï¸ Telegram,no-resolve
  - GEOIP,netflix,ğŸ¥ NetFlix,no-resolve
  - GEOIP,google,ğŸ‡¬ Google,no-resolve
  - GEOIP,twitter,ğŸ“± ç¤¾äº¤åª’ä½“,no-resolve
  - MATCH,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
